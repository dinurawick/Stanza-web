"use strict";(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[5625],{95913:(e,t,n)=>{n.r(t),n.d(t,{SiteMapSymbol:()=>l.iQ,TpaEventsListenerManagerSymbol:()=>l.oJ,TpaModalSymbol:()=>a.tY,TpaPopupSymbol:()=>a.ir,TpaSymbol:()=>l.Uj,name:()=>l.UU,page:()=>un});var i=n(16537),a=n(60950),r=n(18922),o=n(77748),s=n(20590),p=n(87711),d=n(32166),l=n(86227),g=n(48556),c=n(62472),u=n(59427),m=n(5164),I=n(2897);const h=(0,o.Og)([(0,o.KT)(s.YG,g.UU),(0,o.KT)(s.Gp,l.UU),(0,o.m3)(a.dQ),p.Ji,d.RV,d.TQ,(0,o.lq)(m.Q),(0,o.lq)(u.IY)],((e,t,n,i,a,{mode:{debug:r}},o,s)=>{const{appsClientSpecMapData:p}=e,d=({tpa:e,origin:n,callId:i,status:a,res:r,compId:o})=>{const p={callId:i,intent:"TPA_RESPONSE",status:a,res:r};s&&s.tpa.addMessage({message:p,compId:o,contextId:t.pageId,origin:n}),e.postMessage(JSON.stringify(p),"*")},l=Object.assign({},...n.map((e=>e.getTpaHandlers())));return{async handleMessage({source:n,origin:a,message:s}){const{type:g,callId:u,compId:m,data:h,deviceType:f,originFrame:T}=s,P=(e=>{const t=i.get(e)?.src||i.get(e)?.url;return t?new URL(t):null})(m);if("https://static.parastorage.com"!==a&&!((e,t)=>e?.origin===t)(P,a)&&!(e=>"https://editor.wix.com"===e||"https://create.editorx.com"===e||"https://blocks.wix.com"===e)(a))return void(r&&console.warn("discarded tpa message: untrusted origin",{origin:a,message:s}));const w=l[g];if(!w)return void(r&&console.warn(`TpaHandlerError: ${g} handler is not implemented`));const y=c.l.getOriginCompId(m),U=t.widgets[y],C=o?.isTpaWorker(m),D=C?o.getWorkerDetails(m):null,S=C?D.appDefinitionId:U?.appDefinitionId,O=w(m,h,{callId:u,tpa:n,appDefinitionId:S,tpaCompData:U,appClientSpecMapData:{appDefinitionId:S,...p[S]},originCompId:y,viewMode:e.viewMode});if(void 0!==O)try{const e=await O;if(e===I.Zq)return;d({tpa:n,origin:a,callId:u,compId:m,status:!0,res:e})}catch(e){const{message:t,name:i,stack:r}=e;d({tpa:n,origin:a,callId:u,compId:m,status:!1,res:{error:{message:t,name:i,stack:r}}})}}}})),f=(0,o.Og)([(0,o.KT)(s.Gp,l.UU),s.$0,l.oJ],((e,t,n)=>{const i=t=>{Object.entries(e.widgets).forEach((e=>{n.dispatch("CONSENT_POLICY_UPDATE",(()=>t),{compId:e[0]})}))};return{pageDidMount:()=>t.registerToChanges(i)}})),T=({tpaModal:e,tpaPopup:t,compId:n="",onCloseMessage:i})=>{t.isPopup(n)?t.closePopup(n,i):e.closeModal(i)},P=(0,o.Og)([a.tY,a.ir],((e,t)=>({getTpaHandlers:()=>({onEscapeClicked:n=>{T({tpaModal:e,tpaPopup:t,compId:n})}})})));var w=n(25083);const y=(0,o.Og)([(0,o.KT)(s.YG,g.UU),(0,o.lq)(w.a)],(({externalBaseUrl:e},t)=>({getTpaHandlers:()=>({async getCustomizedUrlSegments(i,a){const{url:r,options:o}=a,s=t?.urlMappings,{getCustomizedUrlSegments:p}=await Promise.all([n.e(671),n.e(6510)]).then(n.bind(n,87148));return p(s,r,{baseUrl:e,...o})}})}))),U=(0,o.Og)([(0,o.KT)(s.YG,g.UU),(0,o.lq)(w.a)],(({externalBaseUrl:e},t)=>({getTpaHandlers:()=>({async buildCustomizedUrl(i,a){const{key:r,itemData:o,options:s}=a,p=t?.urlMappings,{buildCustomizedUrl:d}=await Promise.all([n.e(671),n.e(6510)]).then(n.bind(n,87148));return d(p,r,o,{baseUrl:e,...s})}})})));var C=n(62155),D=n.n(C),S=n(10553),O=n(77497),L=n(19025);const E={top:"SCROLL_TO_TOP",bottom:"SCROLL_TO_BOTTOM"},b=e=>{const[,t,n]=L.lD.exec(e),i=(a=new URLSearchParams(n),{subject:encodeURIComponent(a.get("subject")||""),body:encodeURIComponent(a.get("body")||""),bcc:encodeURIComponent(a.get("bcc")||""),cc:encodeURIComponent(a.get("cc")||"")});var a;return{type:"EmailLink",href:(0,O.N0)({recipient:t,...i}),target:"_self"}},M=(e,t,n="filesusr.com/",i="",a=!1)=>{const[,r,o]=L._d.exec(e)||L.Og.exec(e);return{type:"DocumentLink",href:(0,O.MU)({docId:r,name:o||"",indexable:!1},t,n,i,a),target:"_blank",docInfo:{docId:r,name:o}}};class v extends Error{constructor(){super("Unsupported link type"),this.name="UnsupportedLinkTypeError",Error.captureStackTrace&&Error.captureStackTrace(this,v)}}const x=({metaSiteId:e="unknown",isMobileView:t=!1})=>{const n=`https://${e}.filesusr.com/`;return{isDynamicPage:()=>!1,isAbsoluteUrl:L.vh,getImpliedLink:e=>(0,O.Zs)(e,t),getImpliedLinks:(e,n)=>(0,O.S3)(e,t,n),getLink:({href:e="",anchorDataId:t="",docInfo:i,type:a}={})=>{if((0,L.QJ)(e))return e;if((e=>e.startsWith(n))(e))return(0,O.UG)(i.docId,i.name);const r="string"==typeof t?t:t?.id;if((0,L.Qx)(r))return`#${D().invert(E)[r]}`;return e},getLinkProps:(t,n,i)=>{if((0,L.QJ)(t))return b(t);if((0,L.ii)(t))return(e=>{const[,t]=L.Lm.exec(e);return{type:"PhoneLink",href:(0,O.hm)({phoneNumber:t}),target:"_self"}})(t);if((0,L.vh)(t))return((e,t="_blank",n="noopener")=>({type:"ExternalLink",href:e,target:t,rel:n}))(t,n,i);if((0,L.V8)(t))return M(t,e);throw new v},getLinkUrlFromDataItem:()=>{throw new Error("getLinkUrlFromDataItem is not implemented")}}},k=/^\/([^ ?#]*)?[#]?([^ ?#]*)[?]?(.*)/,R=/^#([^ ?]*)[?]?(.*)/,$=/^(http|https):\/\/(.*)/,_=/^wix:document:\/\/v1\/(.+)\/(.+)/,A=/^document:\/\/(.*)/,N={top:"SCROLL_TO_TOP",bottom:"SCROLL_TO_BOTTOM"},H=e=>{const[,t,n]=L.lD.exec(e),i=(a=new URLSearchParams(n),{subject:encodeURIComponent(a.get("subject")||""),body:encodeURIComponent(a.get("body")||""),bcc:encodeURIComponent(a.get("bcc")||""),cc:encodeURIComponent(a.get("cc")||"")});var a;return{type:"EmailLink",href:(0,O.N0)({recipient:t,...i}),target:"_self"}},K=e=>$.test(e),G=(e,t)=>{if(e){const[n]=t.replace("#","/#").split(/[/]+/),i=Object.values(e).filter((e=>e.prefix===n));return 1===i.length}return!1},B=(e,t)=>{const n=D().findKey(e.routes,(e=>{if("Dynamic"===e.type){return(e.pageIds||[]).includes(t)}return e.pageId===t}));if(n)return V(n);throw new Error(`No url route for pageId: ${t}`)};class F extends Error{constructor(){super("Unsupported link type"),this.name="UnsupportedLinkTypeError",Error.captureStackTrace&&Error.captureStackTrace(this,F)}}const V=e=>e.replace(/^\.\//,"/"),z=e=>["SCROLL_TO_TOP","SCROLL_TO_BOTTOM"].includes(e),q=({routingInfo:e,metaSiteId:t,userFileDomainUrl:n,popupPages:i,getCompIdByWixCodeNickname:a,getRoleForCompId:r,routersConfig:o,multilingualInfo:s,isMobileView:p,isPremiumDomain:d})=>{const l=`https://${t}.${n}/`,g=e=>!!i&&i[e],c=(e,t="")=>`wix:document://v1/${e}/${t}`,u=e=>{const[,t="",n="",i=""]=k.exec(e),a=t.replace(/\/+$/,""),r=new URLSearchParams(i);return s?.isOriginalLanguage||"QueryParam"!==s?.currentLanguage?.resolutionMethod||r.set("lang",s.currentLanguage.languageCode),{relativePageUrlPrefix:a,anchor:n,queryString:r.toString()}},m=(t,n="_self",i)=>{const{relativePageUrlPrefix:r="",anchor:s="",queryString:p}=u(t),d=N[s]||s;if(g(r))return{type:"PageLink",href:"",target:"_self",linkPopupId:r};const l=e.externalBaseUrl;let c,m,I;if(G(o,r)){I=`./${r}`===e.relativeUrl,c="DynamicPageLink",m=`${l}/${r}`}else{const[t,n]=((e,t)=>{const n=decodeURIComponent(t);if(e[`./${n}`])return[n,""];{const[e,...n]=t.split("/");return[e,n.length>0?`/${n.join("/")}`:""]}})(e.routes,r),i=e.pagesUriSEOs[t]||t,a=`./${i}`,o="./"===a?{pageId:e.mainPageId}:e.routes[a];c="PageLink",m=o?.pageId===e.mainPageId&&!n?l:`${l}/${i}${n}`,I=o&&o.pageId===e.pageId}const h=d&&a&&a(d),f=I&&h,T=d&&!f;return{href:`${m}${p?`?${new URLSearchParams(p).toString()}`:""}`,target:n,rel:i,type:c,...f&&{anchorCompId:h},...T&&{anchorDataId:d}}},I=e=>{const[t,n]=e.split("?");if(n){const e=encodeURIComponent(`?${n}`);return t?`${t}${e}`:e}return t},h={AnchorLink:t=>{const{anchorDataId:n,pageId:i}=t,a=z(n)?e.pageId:i.replace(/^#/,""),r=n.startsWith("#")?n:`#${n}`;return`${B(e,a)}${r}`},DocumentLink:e=>{const{docId:t,name:n}=e;return c(t,n)},ExternalLink:e=>{const{url:t}=e;return t},DynamicPageLink:e=>{const{routerId:t,innerRoute:n,anchorDataId:i=""}=e,a=`/${o[t].prefix}`,r=n?I(n):n;return`${a}${r?`/${r}${i}`:i}`},TpaPageLink:t=>{const{pageId:n,path:i=""}=t,a=n.replace(/^#/,""),r=e.pageIdToPrefix[a],o=e.pages[a].pageUriSEO,s=r?`/${r}/${o}`:`/${o}`,p=I(i);if(i.startsWith(s))return p;return`${s}${p?`/${p}`:""}`},PageLink:t=>{const{pageId:n}=t,i=(("string"==typeof n?n:n.id)||"").replace(/^#/,"");return g(i)?`/${i}`:i===e.mainPageId?"/":B(e,i)},PhoneLink:e=>(0,O.hm)(e),EmailLink:e=>(0,O.N0)(e)};return{isAbsoluteUrl:K,isDynamicPage:e=>{const{relativePageUrlPrefix:t}=u(e);return G(o,t)},getImpliedLink:e=>(0,O.Zs)(e,p),getImpliedLinks:(e,t)=>(0,O.S3)(e,p,t),getLink:({href:t="",linkPopupId:n,anchorCompId:i="",anchorDataId:a="",docInfo:o,type:s}={})=>{if(n)return`/${n}`;if((0,L.QJ)(t))return t;if((t=>t.startsWith(l)||d&&t.startsWith((0,O.pk)(e.externalBaseUrl).href))(t))return c(o.docId,o.name);const p="string"==typeof a?a:a?.id;if(z(p))return`#${D().invert(N)[p]}`;if("ExternalLink"===s)return t;const[g]=t.split("?"),u=r?.(i,"wixCode")||p,m=u?`#${u}`:"",I=g===e.externalBaseUrl?(()=>{const t=D().findKey(e.routes,(t=>t.pageId===e.mainPageId));return V(t)})():(t=>t.replace(e.externalBaseUrl,""))(g);return`${I}${m}`},getLinkProps:(i,a,r)=>{if(o=i,R.test(o)){const t=V(e.relativeUrl);return m(`${t}${i}`,a)}var o;if((e=>k.test(e))(i))return m(i,a,r);if((0,L.QJ)(i))return H(i);if((0,L.ii)(i))return(e=>{const[,t]=L.Lm.exec(e);return{type:"PhoneLink",href:(0,O.hm)({phoneNumber:t}),target:"_self"}})(i);if(K(i))return((e,t="_blank",n="noopener")=>({type:"ExternalLink",href:e,target:t,rel:n}))(i,a,r);if((e=>_.test(e)||A.test(e))(i))return(i=>{const[,a,r]=_.exec(i)||A.exec(i);return{type:"DocumentLink",href:(0,O.MU)({docId:a,name:r||"",indexable:!1},t,n,e.externalBaseUrl,d),target:"_blank",docInfo:{docId:a,name:r}}})(i);throw new F},getLinkUrlFromDataItem:e=>{const t=h[e.type];if(t)return t(e);throw new Error("Provided link type is not supported")}}},W={top:"SCROLL_TO_TOP",bottom:"SCROLL_TO_BOTTOM"},j=(e,t)=>{if(e){const[n]=t.replace("#","/#").split(/[/]+/),i=Object.values(e).filter((e=>e.prefix===n));return 1===i.length}return!1},Y=(e,t)=>{const n=D().findKey(e.routes,(e=>{if("Dynamic"===e.type){return(e.pageIds||[]).includes(t)}return e.pageId===t}));if(n)return J(n);throw new Error(`No url route for pageId: ${t}`)},J=e=>e.replace(/^\.\//,"/"),Q=(e,t)=>{const n=e.replace(/\/+$/,""),i=t.replace(/^\/+/,"");return`${n}/${i}`.replace(/\/+$/,"")},X=({routingInfo:e,metaSiteId:t,userFileDomainUrl:n,popupPages:i,getCompIdByWixCodeNickname:a,getRoleForCompId:r,routersConfig:o,multilingualInfo:s,isMobileView:p,isPremiumDomain:d,experiments:l,getIsUrlCustomized:g})=>{const c=x({metaSiteId:t,isMobileView:p});if(!l["specs.thunderbolt.splitLinkUtils"])return q({routingInfo:e,metaSiteId:t,userFileDomainUrl:n,popupPages:i,getCompIdByWixCodeNickname:a,getRoleForCompId:r,routersConfig:o,multilingualInfo:s,isMobileView:p,isPremiumDomain:d,experiments:l});const u=`https://${t}.${n}/`,m=e=>!!i&&i[e],I=e=>{const[,t="",n="",i=""]=L.ak.exec(e),a=t.replace(/\/+$/,""),r=new URLSearchParams(i);return s?.isOriginalLanguage||"QueryParam"!==s?.currentLanguage?.resolutionMethod||r.set("lang",s.currentLanguage.languageCode),{relativePageUrlPrefix:a,anchor:n,queryString:r.toString()}},h=(t,n="_self",i)=>{const{relativePageUrlPrefix:r="",anchor:s="",queryString:p}=I(t),d=W[s]||s;if(m(r))return{type:"PageLink",href:"",target:"_self",linkPopupId:r};const l=e.externalBaseUrl;let g,c,u;if(j(o,r)){u=`./${r}`===e.relativeUrl,g="DynamicPageLink",c=`${l}/${r}`}else{const[t,n]=((e,t)=>{const n=decodeURIComponent(t);if(e[`./${n}`])return[n,""];{const[e,...n]=t.split("/");return[e,n.length>0?`/${n.join("/")}`:""]}})(e.routes,r),i=e.pagesUriSEOs[t]||t,a=`./${i}`,o="./"===a?{pageId:e.mainPageId}:e.routes[a];g="PageLink",c=o?.pageId===e.mainPageId&&!n?l:`${l}/${i}${n}`,u=o&&o.pageId===e.pageId}const h=d&&a&&a(d),f=u&&h,T=d&&!f;return{href:`${c}${p?`?${new URLSearchParams(p).toString()}`:""}`,target:n,rel:i,type:g,...f&&{anchorCompId:h},...T&&{anchorDataId:d}}},f=e=>{const[t,n]=e.split("?");if(n){const e=encodeURIComponent(`?${n}`);return t?`${t}${e}`:e}return t},T={AnchorLink:t=>{const{anchorDataId:n,pageId:i}=t,a=(0,L.Qx)(n)?e.pageId:i.replace(/^#/,""),r=n.startsWith("#")?n:`#${n}`;return`${Y(e,a)}${r}`},DocumentLink:e=>{const{docId:t,name:n}=e;return(0,O.UG)(t,n)},ExternalLink:e=>{const{url:t}=e;return t},DynamicPageLink:e=>{const{routerId:t,innerRoute:n,anchorDataId:i=""}=e,a=`/${o[t].prefix}`,r=n?f(n):n;return`${a}${r?`/${r}${i}`:i}`},TpaPageLink:t=>{const{pageId:n,path:i=""}=t,a=n.replace(/^#/,""),r=e.pageIdToPrefix[a],o=e.pages[a].pageUriSEO,s=r?`/${r}/${o}`:`/${o}`,p=f(i);if(!!l["specs.thunderbolt.TPAJumpToLinkDataPath"]&&p){if(Boolean(g?.(p)))return r?Q(r,p):p}return i.startsWith(s)?p:Q(s,p)},PageLink:t=>{const{pageId:n}=t,i=(("string"==typeof n?n:n.id)||"").replace(/^#/,"");return m(i)?`/${i}`:i===e.mainPageId?"/":Y(e,i)},PhoneLink:e=>(0,O.hm)(e),EmailLink:e=>(0,O.N0)(e)};return{isDynamicPage:e=>{const{relativePageUrlPrefix:t}=I(e);return j(o,t)},isAbsoluteUrl:c.isAbsoluteUrl,getImpliedLink:c.getImpliedLink,getImpliedLinks:c.getImpliedLinks,getLink:({href:n="",linkPopupId:i,anchorCompId:a="",anchorDataId:o="",docInfo:s,type:p}={})=>{if(i)return`/${i}`;if((t=>t.startsWith(u)||d&&t.startsWith((0,O.pk)(e.externalBaseUrl).href))(n))return(0,O.UG)(s.docId,s.name);const l={href:n,linkPopupId:i,anchorDataId:o,docInfo:s,type:p};if(((e,{href:t="",anchorDataId:n="",type:i})=>{const a="string"==typeof n?n:n?.id;return(0,L.QJ)(t)||"ExternalLink"===i||t.startsWith(`https://${e}.filesusr.com/`)||(0,L.Qx)(a)})(t,l))return c.getLink(l);const[g]=n.split("?"),m=r?.(a,"wixCode")||o,I=m?`#${m}`:"",h=g===e.externalBaseUrl?(()=>{const t=D().findKey(e.routes,(t=>t.pageId===e.mainPageId));return J(t)})():(t=>t.replace(e.externalBaseUrl,""))(g);return`${h}${I}`},getLinkProps:(i,a,r)=>{if((0,L.My)(i)){const t=J(e.relativeUrl);return h(`${t}${i}`,a)}return(0,L.rE)(i)?h(i,a,r):(0,L.V8)(i)?M(i,t,n,e.externalBaseUrl,d):c.getLinkProps(i,a,r)},getLinkUrlFromDataItem:e=>{const t=T[e.type];if(t)return t(e);throw new Error("Provided link type is not supported")}}};var Z=n(71085),ee=n(45117),te=n(93425);const ne=(0,o.Og)([(0,o.KT)(s.YG,g.UU),(0,o.KT)(s.Gp,l.UU),(0,o.KT)(s._K,l.UU),Z.wy,S.n,(0,o.lq)(ee.By),(0,o.lq)(te.tX),(0,o.lq)(w.a)],((e,t,n,i,a,r,o,s)=>({getTpaHandlers:()=>({getStateUrl(p,d,{originCompId:l}){const{metaSiteId:g,userFileDomainUrl:c,routersConfig:u,appsClientSpecMapData:m,externalBaseUrl:I,isMobileView:h,isPremiumDomain:f}=e,T=X({routingInfo:i.getLinkUtilsRoutingInfo(),metaSiteId:g,userFileDomainUrl:c,routersConfig:u,popupPages:r?.getLightboxPages(),multilingualInfo:o?.getMultilingualInfo(),isMobileView:h,isPremiumDomain:f,experiments:a,getIsUrlCustomized:s?.getIsUrlCustomized}),P=D()(n.pagesData).groupBy("appDefinitionId").mapValues((e=>e.map((e=>e.id)))).value(),w=Object.entries(n.pagesData).map((([e,t])=>({[t.tpaPageId]:e}))).reduce(D().assign),{state:y,sectionId:U}=d,{appData:C,appPages:S}=(e=>{const n=t.widgets[e].appDefinitionId;return{appData:m[n],appPages:P[n]}})(l);if(!S||0===S.length)return{error:{message:`Page with app "${C.appDefinitionName}" was not found.`}};const O={type:"TpaPageLink",pageId:w[U]||S[0],path:y};return{url:`${I}${T.getLinkUrlFromDataItem(O)}`}}})}))),ie=(0,o.Og)([(0,o.KT)(s.Gp,l.UU)],(({widgets:e})=>({getTpaHandlers:()=>({getStyleParamsByStyleId(t,n){const i=Object.values(e).find((e=>e.styleId===n.styleId)),a=i?.style;return a?{...a}:{error:{message:`Style id "${n.styleId}" was not found.`}}}})})));var ae=n(32777),re=n(63386),oe=n(17840);const se=(0,o.Og)([d.TQ,(0,o.KT)(s.YG,g.UU),re.i$,d.RV,ae.F],((e,{externalBaseUrl:t},n,i,a)=>{const r=e=>({activityDetails:{additionalInfoUrl:null,summary:""},activityInfo:"activityInfo",activityType:"activityType",contactUpdate:{},activityLocationUrl:i.location.href,createdAt:(new Date).toISOString(),...e}),o=((e,t)=>n=>{const i=new URL(t);return Object.entries(n.params).forEach((([e,t])=>{t&&i.searchParams.append(e,t)})),e.envFetch(i.href,{method:"POST",body:JSON.stringify(n.payload),headers:{"Content-Type":"application/json"}})})(a,`${t}/_api/app-integration-bus-web/v1/activities`);return{getTpaHandlers:()=>({postActivity:(0,oe.V)(["site"],((t,{activity:i},{appDefinitionId:a})=>{var s;return(async e=>{const t=await o(e);if(!t.ok)return{status:!1,response:{status:t.status,statusText:t.statusText,responseText:await t.text()}};const{userSessionToken:i,activityId:a,contactId:r}=await t.json();return i&&n.setUserSession(i),{status:!0,response:{activityId:a,contactId:r}}})({params:(s={"application-id":a||"TPA",instance:n.getAppInstanceByAppDefId(a)},{hs:n.getHubSecurityToken(),"activity-id":"xxxxxxxx".replace(/x/g,(()=>(16*Math.random()|0).toString(16))),"metasite-id":e.site.metaSiteId,svSession:n.getUserSession(),version:"1.0.0",...s}),payload:r({contactUpdate:i.contactUpdate||{},activityInfo:i.info||{},activityType:i.type||"TPA",activityDetails:i.details||{}})})}))})}})),pe=(0,o.Og)([re.i$],(e=>({getTpaHandlers:()=>({getCtToken:()=>e.getCtToken(),getUserSession:()=>e.getUserSession()})})));var de=n(75396);const le=(0,o.Og)([Z.$1,de.t7,(0,o.KT)(s.YG,g.UU)],((e,t,{routerByPrefix:n})=>({getTpaHandlers:()=>({getCurrentPageNavigationInfo(){const i=e.getRelativeUrl(),{type:a,pageId:r}=t.getCurrentRouteInfo();if("Static"===a)return{type:"PageLink",pageId:r};const[,o,...s]=i.split("/");return{type:"DynamicPageLink",routerId:n[o],innerRoute:s.join("/")||"/"}}})}))),ge=(0,o.Og)([d.RV],(e=>({getTpaHandlers:()=>({getAdsOnPage(){const t=e.document.getElementById("WIX_ADS");if(!t)return{};const{height:n,width:i,x:a,y:r}=t.getBoundingClientRect();return{top:{height:n,width:i,top:r,left:a}}}})})));var ce=n(49152),ue=n(25874),me=n(77739);const Ie=(0,o.Og)([(0,o.KT)(s.YG,g.UU),(0,o.KT)(s.Gp,l.UU),p.Ji,ue.f,Z.wy,S.n,(0,o.lq)(ee.By),(0,o.lq)(me.nU),(0,o.lq)(te.tX),(0,o.lq)(w.a)],((e,t,n,i,a,r,o,s,p,d)=>({getTpaHandlers(){const d=(t=a.getLinkUtilsRoutingInfo())=>{const{metaSiteId:n,userFileDomainUrl:i,routersConfig:s,isMobileView:d,isPremiumDomain:l}=e;return X({routingInfo:t,metaSiteId:n,userFileDomainUrl:i,routersConfig:s,popupPages:o?.getLightboxPages(),multilingualInfo:p?.getMultilingualInfo(),isMobileView:d,isPremiumDomain:l,experiments:r})},l=async({compId:e,state:n,skipHistory:r,queryParams:o={},disableScrollToTop:s=!0})=>{const p=a.getLinkUtilsRoutingInfo(),l=d(p),{widgets:g}=t,c=g[e]?.isSection;if(!c)return;const u={type:"TpaPageLink",pageId:p.pageId,path:n},m=`${l.getLinkUrlFromDataItem(u)}${D().isEmpty(o)?"":`?appSectionParams=${encodeURIComponent(JSON.stringify(o))}`}`,I=l.getLinkProps(m);await i.navigateTo(I,{skipHistory:r,disableScrollToTop:s})};return{replaceSectionState:async(e,{state:t,queryParams:n})=>l({compId:e,skipHistory:!0,state:t,queryParams:n}),async appStateChanged(e,{state:t}){let r;try{r=JSON.parse(t)}catch(e){r=null}const o=(t,...n)=>{t[ce.s]?t({args:n,compId:e}):t(...n)},p=t=>{const i=n.get(e).onItemClicked;i&&o(i,{type:"itemClicked",itemIndex:t,item:n.get(e).images[t]})};if(!r)return l({compId:e,skipHistory:!1,state:t});{const t={zoom:()=>{const[t]=r.args,{id:i}=n.get(e).images[t];s.openImageZoom(e,i),p(t)},itemClicked:()=>{const[e]=r.args;p(e)},itemChanged:()=>{const[t]=r.args,i=n.get(e).onCurrentItemChanged;i&&o(i,{type:"imageChanged",itemIndex:t,item:n.get(e).images[t]})},componentReady:()=>{const t=n.get(e).readyReportsCount??0;n.update({[e]:{componentReady:!0,readyReportsCount:t+1}})},navigateToDynamicPage:()=>{const[e]=r.args,t=d(),n=(e=>!e.id&&!!(e.href||e.linkPopupId||e.anchorDataId||e.anchorCompId))(e)?e:t.getLinkProps(t.getLinkUrlFromDataItem(e));i.navigateTo(n)},navigateToAnchor:()=>{const[e,t]=r.args,n={type:"PageLink",pageId:"masterPage"===e?a.getLinkUtilsRoutingInfo().pageId:e,target:"_self"},o=d(),s=o.getLinkUrlFromDataItem(n),p=o.getLinkProps(s),l=Object.assign(p,t);i.navigateTo(l)}}[r.cmd];t&&t()}}}}})));var he=n(9492),fe=n(6623);const Te=(0,o.Og)([(0,o.KT)(s.YG,g.UU),he.O$,de.t7,(0,o.lq)(Z.xt),(0,o.lq)(fe.F)],(({debug:e},t,n,i,a)=>({getTpaHandlers:()=>({applicationLoadingStep(t,r,{appDefinitionId:o,tpaCompData:{widgetId:s}={}}){if(c.l.isRuntimeCompId(t))return void(e&&console.warn(`applicationLoadingStep is ignored in runtime component ${t}`));const p=n.getCurrentRouteInfo(),d=Math.round(performance.now()),{stage:l,stageNum:g}=r;a?.logger.log({appId:o,widget_id:s,instance_id:t,src:42,evid:644,tts:d,pid:p?p.pageId:null,stage:l,stageNum:g,pn:i.getPageNumber()},{endpoint:"ugc-viewer"})}})}))),Pe=(0,o.Og)([(0,o.KT)(s.YG,g.UU),he.O$,de.t7,(0,o.lq)(Z.xt),(0,o.lq)(fe.F)],(({debug:e},t,n,i,a)=>({getTpaHandlers:()=>({applicationLoaded(t,r,{appDefinitionId:o,tpaCompData:{widgetId:s}={}}){if(c.l.isRuntimeCompId(t))return void(e&&console.warn(`applicationLoaded is ignored in runtime component ${t}`));const p=n.getCurrentRouteInfo(),d=Math.round(performance.now());a?.logger.log({appId:o,widget_id:s,instance_id:t,src:42,evid:643,tts:d,pid:p?p.pageId:null,pn:i.getPageNumber()},{endpoint:"ugc-viewer"})}})})));var we=n(19889);const ye=(0,o.Og)([we.Np,l.oJ],((e,t)=>({getTpaHandlers:()=>({async refreshCurrentMember(){const n=await e.getMemberDetails(!0);n&&t.dispatch("MEMBER_DETAILS_UPDATED",(()=>n))}})}))),Ue=(0,o.Og)([a.ir,a.tY],(({openPopup:e},t)=>{const n=e=>{if(t.isModal(e)){const e=new Error("An app can not open a popup from a modal.");return e.name="Operation not supported",e}return null};return{getTpaHandlers:()=>({openPopup:(0,oe.V)(["site","preview"],((t,{url:i,...a},{originCompId:r})=>{const o=n(t);return o?Promise.reject(o):e(i,a,r)})),openPersistentPopup:(0,oe.V)(["site","preview"],((t,{url:i,...a},{originCompId:r})=>{const o=n(t);return o?Promise.reject(o):e(i,{...a,persistent:!0},r)}))})}})),Ce=(0,o.Og)([re.i$],(e=>({getTpaHandlers:()=>({getAppVendorProductId(t,{appDefinitionId:n}){const i=e.getAppInstanceByAppDefId(n)?.replace(/^[^.]+./,"");if(!i)return null;const a=JSON.parse(atob(i))?.vendorProductId;return a||null}})})));var De=n(82658);const Se=e=>D().isNumber(e)?e:NaN,Oe=e=>D().parseInt((e||"").toString().split("px")[0]),Le=e=>{const t={size:0,unit:""};return D().isNumber(e)?t.size=e:D().isString(e)&&(t.unit=(e=>{const t=/(%)$/.exec(e);return t&&t[1]?t[1]:""})(e),t.size=(e=>{const t=/^([0-9]+)/.exec(e);return t&&t[1]?parseInt(t[1],10):0})(e)),t},Ee=({width:e,height:t},n)=>"100%"===t&&("100%"===e||Number(Oe(e))>=n.innerWidth),be=(e,t,n)=>{const i=(0,De.fU)(t)?null:t.document.getElementById(n),a=i?i.getBoundingClientRect():null,r=(e=>{let t=0,n=0;if(e&&e.offsetParent){let i=e;do{t+=i.offsetLeft,n+=i.offsetTop}while(i=i.offsetParent)}return{top:n,left:t}})(i),o={left:r.left,top:r.top,width:a?Math.round(a.width):0,height:a?Math.round(a.height):0,actualTop:a?a.top:0,actualLeft:a?a.left:0},s=D().defaults(e.position,{x:0,y:0,origin:"FIXED",placement:"CENTER"}),p=D().pick(e,"height","width"),d={width:(0,De.fU)(t)?0:t.innerWidth,height:(0,De.fU)(t)?0:t.innerHeight},l={RELATIVE:()=>((e,t,n,i)=>{const a=function(e,t,n){return e+t/2-n/2},r=function(e,t,n){return e-(t+n)},o=function(e,t,n){return e-(t+n)},s=function(e,t,n){return e+t/2-n/2},p=Se(i.height),d=Se(i.width),l={CENTER:()=>({height:D().min([p,n.height]),width:D().min([d,n.width]),top:s(t.top,t.height,p),left:a(t.left,t.width,d)}),TOP_LEFT:()=>({height:D().min([p,t.top]),width:D().min([d,t.left]),top:t.top-p,left:t.left-d}),TOP_RIGHT:()=>({height:D().min([p,t.top]),width:D().min([d,o(n.width,t.width,t.left)]),top:t.top-p,left:t.width+t.left}),TOP_CENTER:()=>({height:D().min([p,t.top]),width:D().min([d,n.width]),top:t.top-p,left:a(t.left,t.width,d)}),CENTER_RIGHT:()=>({height:D().min([p,n.height]),width:D().min([d,o(n.width,t.width,t.left)]),top:s(t.top,t.height,p),left:t.width+t.left}),CENTER_LEFT:()=>({height:D().min([p,n.height]),width:D().min([d,t.left]),top:s(t.top,t.height,p),left:t.left-d}),BOTTOM_LEFT:()=>({height:D().min([p,r(n.height,t.top,t.height)]),width:D().min([d,t.left]),top:t.top+t.height,left:t.left-d}),BOTTOM_RIGHT:()=>({height:D().min([p,r(n.height,t.top,t.height)]),width:D().min([d,o(n.width,t.width,t.left)]),top:t.top+t.height,left:t.width+t.left}),BOTTOM_CENTER:()=>({height:D().min([p,r(n.height,t.top,t.height)]),width:D().min([d,n.width]),top:t.top+t.height,left:a(t.left,t.width,d)})}[e.placement](),g=D().max([0,l.top]),c=D().max([0,l.left]);return{position:"absolute",display:"block",width:0,height:0,...l,top:g,left:c}})(s,o,d,p),ABSOLUTE:()=>((e,t,n,i)=>{const a=Se(i.height),r=Se(i.width),o={CENTER:()=>{const i=D().min([t.actualTop+e.y,n.height-(t.actualTop+e.y)]),o=D().min([t.actualLeft+e.x,n.width-(t.actualLeft+e.x)]);return{height:D().min([a,2*i]),width:D().min([r,2*o]),top:t.top+e.y-a/2,left:t.left+e.x-r/2}},TOP_LEFT:()=>({height:D().min([a,t.actualTop+e.y]),width:D().min([r,t.actualLeft+e.x]),top:t.top+e.y-a,left:t.left+e.x-r}),TOP_RIGHT:()=>({height:D().min([a,t.actualTop+e.y]),width:D().min([r,n.width-(t.actualLeft+e.x)]),top:t.top+e.y-a,left:t.left+e.x}),TOP_CENTER:()=>{const i=D().min([t.actualLeft+e.x,n.width-(t.actualLeft+e.x)]);return{height:D().min([a,t.actualTop+e.y]),width:D().min([r,2*i]),top:t.top+e.y-a,left:t.left+e.x-r/2}},CENTER_RIGHT:()=>{const i=D().min([t.actualTop+e.y,n.height-(t.actualTop+e.y)]);return{height:D().min([a,2*i]),width:D().min([r,n.width-(t.actualLeft+e.x)]),top:t.top+e.y-a/2,left:t.left+e.x}},CENTER_LEFT:()=>{const i=D().min([t.actualTop+e.y,n.height-(t.actualTop+e.y)]);return{height:D().min([a,2*i]),width:D().min([r,t.actualLeft+e.x]),top:t.top+e.y-a/2,left:t.left+e.x-r}},BOTTOM_LEFT:()=>({height:D().min([a,n.height-e.y]),width:D().min([r,t.actualLeft+e.x]),top:t.top+e.y,left:t.left+e.x-r}),BOTTOM_RIGHT:()=>({height:D().min([a,n.height-(t.actualTop+e.y)]),width:D().min([r,n.width-(t.actualLeft+e.x)]),top:t.top+e.y,left:t.left+e.x}),BOTTOM_CENTER:()=>{const i=D().min([t.actualLeft+e.x,n.width-(t.actualLeft+e.x)]);return{height:D().min([a,n.height-(t.actualTop+e.y)]),width:D().min([r,2*i]),top:t.top+e.y,left:t.left+e.x-r/2}}}[e.placement](),s=D().max([0,o.top]),p=D().max([0,o.left]);return{position:"absolute",display:"block",width:0,height:0,...o,top:s,left:p}})(s,o,d,p),FIXED:()=>((e,t,n)=>{const i={position:"fixed",display:"block",width:n.width,height:n.height},a=Le(n.height);"%"===a.unit?a.size=D().min([a.size,100]):a.size>t.height&&(a.unit="%",a.size=100);const r=Le(n.width);r.size="%"===r.unit?D().min([r.size,100]):D().min([r.size,t.width]);const o={CENTER:()=>({marginLeft:r.size/-2+(r.unit||"px"),marginTop:"%"===a.unit?0:a.size/-2+(a.unit||"px"),left:"50%",top:"%"===a.unit?0:"50%"}),TOP_LEFT:()=>({left:"0px",top:"0px"}),TOP_RIGHT:()=>({right:"0px",top:"0px"}),TOP_CENTER:()=>({marginLeft:r.size/-2+(r.unit||"px"),top:"0px",left:"50%"}),CENTER_RIGHT:()=>({marginTop:"%"===a.unit?0:a.size/-2+(a.unit||"px"),top:"%"===a.unit?0:"50%",right:"0px"}),CENTER_LEFT:()=>({marginTop:"%"===a.unit?0:a.size/-2+(a.unit||"px"),top:"%"===a.unit?0:"50%",left:"0px"}),BOTTOM_LEFT:()=>({bottom:"0px",left:"0px"}),BOTTOM_RIGHT:()=>({bottom:"0px",right:"0px"}),BOTTOM_CENTER:()=>({marginLeft:r.size/-2+(r.unit||"px"),left:"50%",bottom:"0px"})};return i.width=r.size+(r.unit||"px"),i.height=a.size+(a.unit||"px"),{...i,...o[e.placement]()}})(s,d,p)};return((e,t,n)=>{if(Oe(e.width)<10||Oe(e.height)<10){const e=Le(n.height);e.size="%"===e.unit?D().min([e.size,100]):D().min([e.size,t.height]);const i=Le(n.width);return i.size="%"===i.unit?D().min([i.size,100]):D().min([i.size,t.height]),{position:"fixed",display:"block",width:`${i.size}${i.unit||"px"}`,height:`${e.size}${e.unit||"px"}`,marginLeft:`${i.size/-2}${i.unit||"px"}`,marginTop:`${e.size/-2}${e.unit||"px"}`,left:"50%",top:"50%"}}return e})(l[s.origin](),d,p)};var Me=n(73896);const ve=(0,o.Og)([p.Ji,d.RV,Me.j,(0,o.KT)(s.YG,g.UU),a.tY],((e,t,n,i,a)=>{const r=(r,o)=>{const{options:s,originCompId:p}=e.get(r),d={...s,...o},l=a.isModal(r)?(e=>["height","width"].reduce(((t,n)=>{const i=e[n];if(!D().isNil(i)){const{unit:e,size:a}=Le(i);e||(t[n]=a)}return t}),{}))(o):be(d,t,p);e.update({[r]:{styleOverrides:l}}),n.setSiteScrollingBlocked(i.isMobileView&&Ee(l,t),r)};return{getTpaHandlers:()=>({async resizeWindow(t,n,{tpaCompData:i}){if(c.l.isRuntimeCompId(t))r(t,n);else if(i?.isPinned){const i={width:D().isNumber(n.width)?`${n.width}px`:n.width,height:D().isNumber(n.height)?`${n.height}px`:n.height};D().isEqual(i,e.get(t).styleOverrides)||e.update({[t]:{styleOverrides:i}})}},heightChanged(t,n,{tpaCompData:i}){if(c.l.isRuntimeCompId(t))r(t,{height:n.height});else{if(0===n.height&&!i?.isPinned)return;e.update({[t]:{heightOverride:Math.round(n.height),heightOverflow:Boolean(n.overflow)}})}}})}})),xe=(0,o.Og)([],(()=>({getTpaHandlers:()=>({onReady:()=>Promise.resolve()})})));var ke=n(86046);class Re extends Error{constructor(e){super(e),this.name="HandlerError"}}const $e=(0,o.Og)([(0,o.KT)(s.YG,g.UU),(0,o.KT)(s._K,l.UU),ue.f,Z.wy,g.V5,S.n,(0,o.lq)(ee.By),(0,o.lq)(te.tX),(0,o.lq)(ke.e$),(0,o.lq)(w.a)],((e,t,i,a,{getTpaSectionByAppDefinitionId:r},o,s,p,d,l)=>{const g=Object.entries(t.pagesData);return{getTpaHandlers:()=>({async navigateToSectionPage(c,u,{appDefinitionId:m}){const{metaSiteId:h,userFileDomainUrl:f,routersConfig:T,isMobileView:P,isPremiumDomain:w}=e,y=X({routingInfo:a.getLinkUtilsRoutingInfo(),metaSiteId:h,userFileDomainUrl:f,routersConfig:T,popupPages:s?.getLightboxPages(),multilingualInfo:p?.getMultilingualInfo(),isMobileView:P,isPremiumDomain:w,experiments:o,getIsUrlCustomized:l?.getIsUrlCustomized}),{sectionIdentifier:{sectionId:U,noTransition:C=!1,queryParams:S={},appDefinitionId:O,state:L}={},state:E}=u,b=O||m;if(!b)throw new Re("Component was not found.");const M=E||L;let v="";try{v=(({appDefinitionId:n,sectionId:i})=>{const a=g.reduce(((e,[t,n])=>(n.appDefinitionId&&(e[n.appDefinitionId]||(e[n.appDefinitionId]={}),e[n.appDefinitionId][n.tpaPageId]=t),e)),{}),r=D()(t.pagesData).filter((e=>!!e.appDefinitionId)).groupBy("appDefinitionId").mapValues((e=>e.map((e=>e.id)))).value(),o=e.appsClientSpecMapData[n];if(!o)throw new Re(`Application with appDefinitionId "${n}" was not found on the site.`);const s=r[n];if(!s||0===s.length)throw new Re(`Page with app "${o.appDefinitionName}" was not found.`);const p=i?a[n][i]:null;if(i&&!p)throw new Re(`App page with sectionId "${i}" was not found.`);return p||s[0]})({appDefinitionId:b,sectionId:U})}catch(e){if(e instanceof Re)return{error:{message:e.message}};throw e}const x={type:"TpaPageLink",pageId:v,path:M},k=await(async e=>{const t=l?.urlMappings;if(t){const{buildCustomizedUrl:i}=await Promise.all([n.e(671),n.e(6510)]).then(n.bind(n,87148)),{key:a,variables:r,options:o}=e?.sectionIdentifier?.customizeTarget?.customUrlData||{};if(a&&r)return i(t,a,r,o)}})(u)||y.getLinkUrlFromDataItem(x),R=`${k}${D().isEmpty(S)?"":`?appSectionParams=${encodeURIComponent(JSON.stringify(S))}`}`,$=y.getLinkProps(R);C&&d&&d.disableNextTransition();if(!await i.navigateTo($)){if(console.warn("You have invoked the navigateToSectionPage() API but you are already on the section page. Please use the pushState() API instead."),!1===u.sectionIdentifier?.shouldRefreshIframe)return I.Zq;const e=r(b);e&&e.rebuildSrc()}return I.Zq}})}})),_e=(0,o.Og)([d.RV,(0,o.KT)(s.Gp,l.UU)],((e,t)=>({getTpaHandlers:()=>({boundingRectAndOffsets(n){const i={offsets:{x:0,y:0},rect:{left:0,right:0,top:0,bottom:0,height:0,width:0},scale:t.siteScale},a=e.document.getElementById(n);if(!a)return i;const r=(()=>{if(!t.isFixedHeader)return 0;const n=e.document.getElementById("SITE_HEADER");return n&&n.getBoundingClientRect().height||0})(),o=a.getBoundingClientRect();return i.offsets={x:o.left+e.scrollX,y:o.top+e.scrollY-r},i.rect=D()(o).pick(["left","right","top","bottom","height","width"]).mapValues((e=>Math.floor(e))).value(),i.rect.top-=r,i}})})));var Ae=n(12457);const Ne=(0,o.Og)([(0,o.KT)(s.Gp,l.UU),Ae.Tf,d.Ht],(({widgets:e},t,n)=>({getTpaHandlers:()=>({setPageMetadata:(0,oe.V)(["site"],(async(i,a,{originCompId:r})=>{if(!e[r]||!e[r].isSection){const e="Setting a page meta data is possible only to TPA Sections and MultiSections";return n.captureError(new Error(e),{tags:{feature:"tpa"}}),{error:{message:e}}}return await t.setTPAOverrides(a),await t.renderSEO(),null}))})}))),He=(0,o.Og)([a.tY],(e=>({getTpaHandlers:()=>({openModal:(0,oe.V)(["site","preview"],((t,{url:n,theme:i,height:a,width:r})=>e.openModal(n,{width:r,height:a,theme:i},t)))})})));var Ke=n(69578),Ge=n(56844);const Be=(0,o.Og)([(0,o.KT)(s.YG,g.UU),ue.f,Z.wy,p.eZ,S.n,(0,o.lq)(ee.By),(0,o.lq)(te.tX),(0,o.lq)(ke.e$),(0,o.lq)(Ke.j9),(0,o.lq)(w.a)],((e,t,n,i,a,r,o,s,p,d)=>{const l=t=>{const{metaSiteId:i,userFileDomainUrl:s,routersConfig:l,isMobileView:g,isPremiumDomain:c}=e,u=p&&a["specs.thunderbolt.servicesInfra"]&&a["specs.thunderbolt.linkUtilsService"]?p.getService(Ge.LinkUtilsDefinition):X({routingInfo:n.getLinkUtilsRoutingInfo(),metaSiteId:i,userFileDomainUrl:s,routersConfig:l,popupPages:r?.getLightboxPages(),multilingualInfo:o?.getMultilingualInfo(),isMobileView:g,isPremiumDomain:c,experiments:a,getIsUrlCustomized:d?.getIsUrlCustomized}),m=u.getLinkUrlFromDataItem(t);return u.getLinkProps(m)},g=({pageId:e,anchorId:i,noTransition:a})=>{const r=(({pageId:e,anchorId:t})=>{const i=l({type:"PageLink",pageId:e,target:"_self"});return t&&(n.getLinkUtilsRoutingInfo().pageId===e?i.anchorCompId=t:i.anchorDataId=t),i})({pageId:e,anchorId:i});return a&&s&&s.disableNextTransition(),t.navigateTo(r)};return{getTpaHandlers:()=>({navigateToPage(e,{pageId:t,anchorId:n,noTransition:i}){g({pageId:t,anchorId:n,noTransition:i})},navigateTo(e,{link:n}){if(n.type===I.rm.EXTERNAL_LINK)return;const i=l(n);t.navigateTo(i)},async navigateToAnchor(e,{anchorId:t}){if(!await g({pageId:n.getLinkUtilsRoutingInfo().pageId,anchorId:t}))throw new Error(`anchor with id "${t}" was not found on the current page.`);return I.Zq},async navigateToComponent(e,{compId:t,pageId:i,noPageTransition:a}){const r=i||n.getLinkUtilsRoutingInfo().pageId;if(!await g({pageId:r,anchorId:t,noTransition:a}))throw new Error(`Page id "${r}" does not contain the component id "${t}".`);return I.Zq}})}})),Fe=(0,o.Og)([(0,o.KT)(s.YG,g.UU)],(({appsClientSpecMapData:e})=>({getTpaHandlers:()=>({getApplicationFields:(t,{appDefinitionId:n})=>e[n].appFields})})));var Ve=n(95017),ze=n(64537);const qe=(0,o.Og)([Ve.j,l.oJ],((e,t)=>({getTpaHandlers:()=>({removeEventListener(n,{eventKey:i},{appDefinitionId:a}){i.startsWith(ze.iZ)?e.unsubscribe(a,n,i):t.unregister(i,n)}})}))),We=(0,o.Og)([Ve.j],(e=>({getTpaHandlers:()=>({publish(t,n,{appDefinitionId:i}){e.publish(i,t,n)}})}))),je=(0,o.Og)([re.i$,l.oJ],((e,t)=>({getTpaHandlers:()=>({async revalidateSession(n,i,{appDefinitionId:a}){await e.loadNewSession();const r={instance:e.getAppInstanceByAppDefId(a)};return t.dispatch("INSTANCE_CHANGED",(()=>r),{appDefinitionId:a}),r}})})));var Ye=n(66340),Je=n(16638);const Qe=(0,o.Og)([(0,o.KT)(s._K,l.UU),(0,o.KT)(s.Gp,l.UU),l._w,Je.A,p.Ji,Ye.aR,S.n],((e,{widgets:t},n,i,a,{getFontsConfig:r},o)=>({getTpaHandlers:()=>({appIsAlive(o,s,{originCompId:p}){const{siteColors:d,isVisualFocusEnabled:l,siteTextPresets:g}=e;a.update({[o]:{sentAppIsAlive:!0}}),n.reportTpaLoadEnd(o);const c=t[p]||{style:{colors:{},numbers:{},booleans:{},fonts:{},googleFontsCssUrl:"",uploadFontFaces:""}},u=r();return c.isWix&&(u.cssUrls=[]),{fonts:u,commonConfig:i.getCommonConfig(),isVisualFocusEnabled:l,siteColors:d,siteTextPresets:g,...c}}})}))),Xe=(0,o.Og)([l.oJ,Ve.j],((e,t)=>({getTpaHandlers:()=>({registerEventListener(n,{eventKey:i,receivePastEvents:a=!1},{callId:r,tpa:o,tpaCompData:{widgetId:s=""}={},appDefinitionId:p}){if(i.startsWith(ze.iZ))t.handleIframeSubscribe(p,n,{eventKey:i,isPersistent:a,callId:r});else{const t=(e,t)=>{o.postMessage(JSON.stringify({intent:"addEventListener",eventType:e,params:t}),"*")};e.register(i,n,t,{widgetId:s,appDefinitionId:p})}}})}))),Ze=(0,o.Og)([a.tY,a.ir],((e,t)=>({getTpaHandlers:()=>({closeWindow:(n,i)=>T({tpaModal:e,tpaPopup:t,compId:n,onCloseMessage:i})})}))),et=(0,o.Og)([de.t7],(e=>({getTpaHandlers:()=>({getCurrentPageId:()=>e.getCurrentRouteInfo().pageId})})));var tt=n(54157);const nt=(0,o.Og)([d.RV,S.n,tt.n],((e,t,n)=>({getTpaHandlers:()=>({async scrollTo(t,{x:i,y:a,scrollAnimation:r}){r&&!n?e.scrollTo({left:i,top:a,behavior:"smooth"}):e.scrollTo(i,a)}})}))),it=(0,o.Og)([d.RV],(e=>({getTpaHandlers:()=>({scrollBy(t,{x:n,y:i}){e.scrollBy(n,i)}})}))),at=(0,o.Og)([(0,o.KT)(s.Gp,l.UU)],(({widgets:e})=>({getTpaHandlers:()=>({getExternalId:(t,n,{originCompId:i})=>Promise.resolve(e[i].externalId)})}))),rt=(0,o.Og)([(0,o.KT)(s.Gp,l.UU),S.n],((e,t)=>({getTpaHandlers(){const n=t["specs.thunderbolt.deprecateAppId"];return{getValue(t,{key:i,scope:a},{originCompId:r}){const{widgets:o,appPublicData:s}=e,{appDefinitionId:p,applicationId:d}=o[r],l="APP"===a?s[n?p:d]:o[r].componentPublicData;return l&&l[i]?{[i]:l[i]}:{error:{message:`key ${i} not found in ${a} scope`}}}}}}))),ot=(0,o.Og)([(0,o.KT)(s.Gp,l.UU),S.n],((e,t)=>{const n=t["specs.thunderbolt.deprecateAppId"];return{getTpaHandlers(){function t(t){const{widgets:i,appPublicData:a}=e,{appDefinitionId:r,applicationId:o}=i[t];return{APP:a[n?r:o],COMPONENT:i[t].componentPublicData}}return{getPublicData:(e,n,{originCompId:i})=>t(i),getValues(e,n,{originCompId:i}){const{scope:a,keys:r}=n,o=t(i);return D().pickBy(o[a],((e,t)=>r.includes(t)))}}}}})),st=(0,o.Og)([(0,o.KT)(s.Gp,l.UU)],(e=>({getTpaHandlers:()=>({getStyleId:(t,n,{originCompId:i})=>e.widgets[i].styleId})}))),pt=(0,o.Og)([(0,o.KT)(s.YG,g.UU)],(e=>({getTpaHandlers:()=>({getViewMode:()=>({editMode:e.viewMode})})}))),dt=(0,o.Og)([(0,o.KT)(s.YG,g.UU),(0,o.KT)(s.Gp,l.UU)],(({widgetsClientSpecMapData:e},{pageId:t})=>({getTpaHandlers:()=>({getComponentInfo(n,i,{tpaCompData:{widgetId:a=""}={}}){const r="masterPage"===t;return{compId:n,showOnAllPages:r,pageId:r?"":t,tpaWidgetId:e[a]?.tpaWidgetId,appPageId:e[a]?.appPage?.id||""}}})}))),lt=(0,o.Og)([(0,o.KT)(s._K,l.UU)],(({pagesData:e})=>({getTpaHandlers:()=>({isAppSectionInstalled(t,{sectionId:n,appDefinitionId:i},{appDefinitionId:a}){const r=D().filter(e,{appDefinitionId:i||a});return D().some(r,{tpaPageId:n})}})}))),gt=(0,o.Og)([l.iQ],(({getSiteMap:e})=>({getTpaHandlers:()=>({getSitePages:async(t,{includePagesUrl:n})=>(await e()).map((e=>({hide:e.hidden,id:D().isString(e.pageId)&&e.pageId.replace("#",""),isHomepage:e.isHomePage||!1,title:e.title,...n&&{url:e.url}}))),getSiteMap:e})}))),ct=(0,o.Og)([Z.$1,de.t7,(0,o.KT)(s._K,l.UU),(0,o.KT)(s.YG,g.UU),d.RV],((e,t,{pagesData:n},{externalBaseUrl:i},a)=>({getTpaHandlers:()=>({siteInfo(){const{pageId:r}=t.getCurrentRouteInfo(),{href:o}=e.getParsedUrl(),{siteDescription:s,siteKeywords:p,title:d}=n[r];return{siteDescription:s,siteKeywords:p,baseUrl:i,pageTitle:a.document.title,pageTitleOnly:d,referer:a.document.referrer,url:o}}})}))),ut=(0,o.Og)([(0,o.KT)(s.YG,g.UU),(0,o.KT)(s._K,l.UU)],(({externalBaseUrl:e,pageIdToPrefix:t},{pagesData:n})=>({getTpaHandlers:()=>({getSectionUrl(i,{sectionIdentifier:a},{appClientSpecMapData:r}){const o=D().find(n,{tpaPageId:a});if(o?.id){const n=t[o.id],i=n?`${n}/${o.pageUriSEO}`:o.pageUriSEO;return{url:`${e}/${i}`,prefix:n||"",relativeUrl:i}}return{error:{message:`Page with app "${r?.appDefinitionName}" was not found.`}}}})})));var mt=n(11779),It=n(2730);const ht=(0,o.Og)([(0,o.KT)(s.YG,g.UU),(0,o.KT)(s.Gp,l.UU),p.Ji,d.RV,mt.U,S.n],((e,{widgets:t},n,i,a,r)=>({getTpaHandlers:()=>({async setFullScreenMobile(o,{isFullScreen:s}){const{isMobileView:p,viewMode:d}=e;if(!p)throw new Error("show full screen is only available in Mobile view");const l=e=>{n.update({[o]:e})},g=r["specs.thunderbolt.updateTpaHandlerMobileViewInPreviewMode"];if((n=>{const{widgetsClientSpecMapData:i}=e,a=t[n]||{},{appDefinitionId:r}=i[a.widgetId]||{};return Object.values(I._p).includes(r)})(o)){const e="preview"===d&&g;l(s?{iOSVersion:(0,It.O)(i),isMobileFullScreenMode:!0}:e?{isMobileFullScreenMode:!0,isMobileView:p}:{isMobileFullScreenMode:!1}),a.setFullScreenMobile(o,s)}}})}))),ft=()=>{},Tt=(0,o.Og)([],(()=>({getTpaHandlers:()=>({getSiteRevision:ft,getDeviceType:ft,toWixDate:ft,getCompId:ft,getOrigCompId:ft,getWidth:ft,isInModal:ft,getLocale:ft,getCacheKiller:ft,getTarget:ft,getInstanceId:ft,getSignDate:ft,getUid:ft,getPermissions:ft,getIpAndPort:ft,getDemoMode:ft,getInstanceValue:ft,getSiteOwnerId:ft,getImageUrl:ft,getResizedImageUrl:ft,getAudioUrl:ft,getDocumentUrl:ft,getSwfUrl:ft,getPreviewSecureMusicUrl:ft,getStyleParams:ft,getStyleColorByKey:ft,getColorByreference:ft,getSiteTextPresets:ft,getFontsSpriteUrl:ft,getStyleFontByKey:ft,getStyleFontByReference:ft,getSiteColors:ft,getViewModeInternal:ft,postMessage:ft,getEditorFonts:ft,setUILIBParamValue:ft,removeAppMetadata:ft,setAppMetadata:ft,setColorParam:ft,setStyleParam:ft,resizeComponent:ft,setValue:ft,isSupported:ft,appEngaged:ft,getInstalledInstance:ft,isApplicationInstalled:ft,isCustomApplicationPermissionsGranted:ft,isGroupApplicationPermissionsGranted:ft,setFullWidth:ft})})));var Pt=n(8145);const wt=(0,o.Og)([(0,o.lq)(Pt.U)],(e=>({getTpaHandlers:()=>({reportVisitorActivity:e?e.reportActivity:()=>{}})}))),yt=(0,o.Og)([p.eZ,p.Ji],((e,t)=>({getTpaHandlers:()=>({getCurrentPageAnchors:()=>D()(e.getEntireStore()).pickBy((({componentType:e})=>"Anchor"===e)).mapValues(((e,n)=>({id:n,title:t.get(n).name}))).values().sortBy((({id:e})=>{switch(e){case"SCROLL_TO_TOP":return 0;case"SCROLL_TO_BOTTOM":return 1;default:return 2}})).value()})})));var Ut=n(21344);const Ct=(e,t,n)=>({error:{errorCode:e,message:t,error:n}}),Dt="BAD_REQUEST_ERROR",St="WIX_ERROR",Ot=e=>(...t)=>window.ApplePaySession?"function"==typeof e?e(...t):void 0:{error:{errorCode:"APPLE_PAY_IS_NOT_AVAILABLE_ERROR"}},Lt=(0,o.Og)([d.TQ],(({siteAssets:e})=>({getTpaHandlers:()=>({applePayInvokeMethod:Ot((async(e,t)=>{if(!t.methodName)return Ct(Dt);switch(t.methodName){case"canMakePayments":try{return{result:window.ApplePaySession.canMakePayments()}}catch(e){return Ct(St,"ApplePaySession.canMakePayments() failed",e)}case"supportsVersion":try{return{result:window.ApplePaySession.supportsVersion(t.payload.version)}}catch(e){return Ct(St,`ApplePaySession.supportsVersion(${t.payload.version}) failed`,e)}default:return Ct(Dt)}})),applePayStartSession:Ot((async(t,{paymentRequest:n,applePayVersion:i,callbackApiId:a},r)=>{try{const t=new window.ApplePaySession(i,n),o=await(0,Ut.pQ)(e.clientTopology.moduleRepoUrl),s=window.document.querySelector(`#${r.originCompId} > iframe`);if(!s)return Ct(St,`Can not find a TPA iframe with id: ${r.originCompId}`);const p=await o.api.request(a,{target:s});t.onvalidatemerchant=async e=>{const n=await p.onValidateMerchant({validationURL:e.validationURL});return t.completeMerchantValidation(n)},t.onshippingcontactselected=async e=>{const n=await p.onShippingContactSelected({shippingContact:e.shippingContact});return Array.isArray(n.errors)&&(n.errors=n.errors.map((e=>{return t=e,new window.ApplePayError(t.code,t.contactField,t.message);var t}))),t.completeShippingContactSelection(n)},t.onshippingmethodselected=async e=>{const n=await p.onShippingMethodSelected({shippingMethod:e.shippingMethod});return t.completeShippingMethodSelection(n)},t.onpaymentauthorized=async e=>{const n=await p.onPaymentAuthorized({payment:e.payment});return t.completePayment(n)},t.oncancel=async()=>await p.onCancel();const{canceled:d}=await p.onClick();if(d)return;t.begin()}catch(e){return Ct(St,e?.message,e)}}))})}))),Et=[Tt,Qe,Xe,Ze,et,nt,it,at,rt,ot,Ne,je,pt,st,dt,lt,ct,We,qe,gt,(0,o.Og)([de.t7],(e=>({getTpaHandlers:()=>({getRouterPublicData:()=>e.getCurrentRouteInfo()?.dynamicRouteData?.publicData??{}})}))),Fe,He,Be,ye,ut,_e,Ce,ve,xe,$e,Ue,ht,wt,Ie,Pe,Te,ge,pe,le,ie,se,ne,yt,U,y,P,Lt],bt={STATE_CHANGED:"STATE_CHANGED",INSTANCE_CHANGED:"INSTANCE_CHANGED",PAGE_NAVIGATION:"PAGE_NAVIGATION",MEMBER_DETAILS_UPDATED:"MEMBER_DETAILS_UPDATED",CONSENT_POLICY_UPDATE:"CONSENT_POLICY_UPDATE",SCROLL:"SCROLL",QUICK_ACTION_TRIGGERED:"QUICK_ACTION_TRIGGERED",COMMON_CONFIG_UPDATE:"COMMON_CONFIG_UPDATE"},Mt=(0,o.Og)([(0,o.KT)(s.wk,l.UU),(0,o.KT)(s.Gp,l.UU),re.i$],((e,t,n)=>{const i=(t,n,i=(()=>!0))=>{D().forEach(e.get().registry[t],((e,a)=>{if(!e)return;const{listener:r,...o}=e,s=(p=i,D().isFunction(p)?p:e=>{const[t]=Object.keys(p);return e[t]===p[t]});var p;const d={compId:a,...o};s(d)&&r(t,n(d))}))};return(e=>{e.update((e=>D().merge({},e,{registry:{}})))})(e),{pageDidMount:()=>n.addLoadNewSessionCallback((({results:{instances:e},reason:t})=>{"expiry"===t&&i("INSTANCE_CHANGED",(({appDefinitionId:t})=>({instance:e[t]})))})),register(n,i,a,r){(e=>e in bt)(n)&&e.update((e=>D().merge({},e,{registry:{[n]:{[i]:{...r,pageId:t.pageId,listener:a}}}})))},unregister(t,n){e.update((e=>D().set(e,["registry",t,n],null)))},dispatch:i}}));var vt=n(19110);const xt=(0,o.Og)([l.sy,re.i$,d.RV,vt.M,d.HW],((e,t,n,i,a)=>{const r=t.addLoadNewSessionCallback(e.refreshAllPopups),o=()=>{r(),e.closeNonPersistentPopups()};return{...e,init(){i.registerToPageDidUnmount(o)},pageDidMount:()=>o,async openPopup(...t){if(!(0,De.fU)(n))return await a,e.openPopup(...t)}}}));var kt=n(39218);const Rt="tpapopup",$t=(0,o.Og)([p.Ji,p.eZ,(0,o.KT)(s.wk,l.UU),(0,o.KT)(s.YG,g.UU),(0,o.KT)(s._K,l.UU),(0,o.KT)(s.Gp,l.UU),re.i$,d.RV,Me.j,kt.DR,g.FG,g.XM,Ve.j],((e,t,n,i,a,r,o,s,p,d,l,g,u)=>{const m={},I=e=>{n.update((t=>({...t,tpaPopup:{persistentPopups:e,popups:t?.tpaPopup?.popups||{}}})))},h=e=>{n.update((t=>({...t,tpaPopup:{popups:e,persistentPopups:t?.tpaPopup?.persistentPopups||{}}})))},f=()=>D().get(n.get(),["tpaPopup","popups"],{}),T=()=>D().get(n.get(),["tpaPopup","persistentPopups"],{}),P=new RegExp(c.l.buildRuntimeCompId(`${Rt}-[0-9]+`,".+"));return{isPopup:e=>P.test(e),refreshAllPopups:()=>{Object.values(T()).forEach((({refreshPopUp:e})=>e())),Object.values(m).forEach((({refreshPopUp:e})=>e()))},closeNonPersistentPopups:()=>Object.values(m).forEach((({closePopup:e})=>{e()})),openPopup(n,o,P){const{isMobileView:w,isMobileDevice:y,previewMode:U,viewMode:C}=i,{masterPageTpaComps:S,isResponsive:O}=a,{widgets:L,pageId:E}=r;return new Promise((async i=>{const a=c.l.buildRuntimeCompId(`${Rt}-${Date.now()}`,c.l.getOriginCompId(P)),r=P&&t.getContextIdOfCompId(P)||d;g.registerTpasForContext({contextId:r,pageId:E},[a]);const b=e=>{if(o.persistent){const e=T();delete e[a],I(e)}else delete m[a],h(D().omit(f(),a));t.removeComponentFromDynamicStructure(a),p.setSiteScrollingBlocked(!1,a),o.persistent||u.clearListenersByCompId(a),i(e)},M=e=>/^0(?:px|%)?$/.test(`${e}`),v=y&&U&&!M(o.width)&&!M(o.height)?{position:"fixed",width:`${O?s.innerWidth:319}px`,height:`${s.innerHeight}px`,marginLeft:0,marginTop:0,boxShadow:"none",left:"50%",transform:"translateX(-50%)",top:0}:{},x={...be(o,s,P),...v},k=()=>{const e=L[P]||S[P];return l.buildSrc(a,E,e,n,{extraQueryParams:{isInPopup:"true",origCompId:P,viewMode:C}})},R={options:o,originCompId:P,src:k(),styleOverrides:x,isBareTheme:"BARE"===o.theme,title:o.title,closePopup:b};e.update({[a]:R}),p.setSiteScrollingBlocked(w&&Ee(x,s),a),await t.addComponentToDynamicStructure(a,{components:[],componentType:"TPAPopup"});const $={isPersistent:o.persistent,closePopup:b,refreshPopUp:()=>{(L[P]||S[P])&&e.update({[a]:{src:k()}})}};$.isPersistent?I({...T(),[a]:$}):(m[a]=$,h({...f(),[a]:$}))}))},closePopup(e,t){const n=T()[e]||f()[e];n&&n.closePopup(t)},getOpenedPopups:()=>({...T(),...m})}}));var _t=n(98757),At=n(98323);const Nt="tpaModal",Ht=(0,o.Og)([(0,o.KT)(s.YG,g.UU),(0,o.KT)(s._K,l.UU),(0,o.KT)(s.Gp,l.UU),(0,o.KT)(s.wk,l.UU),p.Ji,d.RV,Me.j,p.eZ,re.i$,kt.DR,g.FG,g.XM,de.t7,At.j,vt.M,d.HW,(0,o.lq)(ee.By)],((e,{masterPageTpaComps:t},n,i,a,r,o,s,p,d,l,g,u,m,I,h,f)=>{let T=()=>{};const P=e=>{i.update((t=>({...t,tpaModal:{...t?.tpaModal||{},closeModalImpl:e}})))},w=e=>{i.update((t=>({...t,tpaModal:{...t?.tpaModal||{},currentModalId:e}})))},y=()=>D().get(i.get(),["tpaModal","closeModalImpl"],(()=>{})),U=(e,t,n)=>{const i={width:r.innerWidth,height:r.innerHeight};if(e=Math.min(e,i.width),t=Math.min(t,i.height),!n){const n=i.width-50,a=i.height-50;e>=n&&t>=a&&(e=n,t=a)}return{width:e,height:t}};return{init(e){I.registerToPageDidUnmount(y())},pageWillUnmount(){y()()},isModal:e=>e.startsWith(Nt),openModal(i,{width:p,height:I,title:C,theme:D},S){if((0,De.fU)(r))return new Promise((()=>{}));let O;const{tpaModalConfig:L,isMobileDevice:E,previewMode:b,viewMode:M}=e,{pageId:v,widgets:x}=n,{wixTPAs:k}=L,R=c.l.buildRuntimeCompId(Nt,c.l.getOriginCompId(S||v)),$=S&&s.getContextIdOfCompId(S)||d;g.registerTpasForContext({contextId:$,pageId:v},[R]),y()(),m.enableCyclicTabbing(R);const _=S?a.get(S):null,A=k[_?_.appDefinitionId:null],N=()=>{const e=U(p,I,A);a.update({[R]:{width:e.width,height:e.height}})};return r.addEventListener("resize",N),E&&o.setSiteScrollingBlocked(!0,R),new Promise((async n=>{await h;const g=f?.getCurrentLightboxId(),c=u.getCurrentRouteInfo()?.contextId;if(d!==c&&"masterPage"!==d&&d!==g)return void(e.debug&&console.warn(`Tried to open modal but the current context ID: ${c} doesn't equal the modal context ID: ${d}`));w(R),P((e=>{P((()=>{})),r.removeEventListener("resize",N),m.disableCyclicTabbing(R),T(),E&&(o.setSiteScrollingBlocked(!1,R),(0,_t.sE)(r,!1)),s.removeComponentFromDynamicStructure(R),a.update({[R]:{src:null,closeModal:()=>{}}}),O?.focus(),O=null,w(null),n(e)})),T=(e=>{if((0,De.fU)(r))return()=>{};const t=t=>{"Escape"===t.key&&e()};return r.addEventListener("keydown",t),()=>r.removeEventListener("keydown",t)})(y()),E&&"LIGHT_BOX"===D&&(0,_t.sE)(r,!0);const L=U(p,I,A),k=S&&(x[S]||t[S])||{},$=l.buildSrc(R,v,k,i,{extraQueryParams:{isInModal:"true",origCompId:S,viewMode:M}});a.update({[R]:{src:$,width:L.width,height:L.height,closeModal:y(),isMobileDevice:E,isPreviewMode:b,title:C,theme:D}}),O=document.activeElement,await s.addComponentToDynamicStructure(R,{components:[],componentType:"TPAModal"})}))},closeModal(e){y()(e)},getCurrentModalId:()=>D().get(i.get(),["tpaModal","currentModalId"],null)}}));var Kt=n(45024),Gt=n(17709),Bt=n.n(Gt);const Ft=(0,o.Og)([Kt.O,l.oJ,kt.Is],(({registerToThrottledScroll:e},t,n)=>({name:"siteScrollDispatch",pageWillMount(){e((e=>{Bt().measure((()=>{t.dispatch("SCROLL",(({compId:t})=>((e,t)=>{const n=window.document.getElementById(t);if(!n)return{};const i=n.getBoundingClientRect();return{x:e.x+i.left,y:e.y+i.top,width:i.width,height:i.height,scrollTop:e.y,scrollLeft:e.x,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth}})(e,t)),{pageId:n})}))}))}}))),Vt=(0,o.Og)([Je.A,l.oJ],((e,t)=>({pageDidMount:()=>e.registerToCommonConfigChange((e=>t.dispatch("COMMON_CONFIG_UPDATE",(()=>e))))}))),zt=(0,o.Og)([l.oJ,de.t7],((e,t)=>({pageDidLoad({pageId:n}){const i=t.getPreviousRouterInfo()?.pageId;if(!i||i===n)return;const a={fromPage:i,toPage:n},r=t.getCurrentRouteInfo().dynamicRouteData?.publicData;r&&(a.routerPublicData=r),e.dispatch("PAGE_NAVIGATION",(()=>a))}}))),qt=(0,o.Og)([p.Ji,(0,o.KT)(s.YG,g.UU),(0,o.KT)(s.Gp,l.UU),re.i$,kt.DR,g.XM,l.VY],((e,{widgetsClientSpecMapData:t},n,i,a,r,o)=>{const{widgets:s,tpaInnerRouteConfig:p,pageId:d}=n;((e,t,n,i)=>{const a=Object.entries(e).map((([e,n])=>(n.templateId&&e!==n.templateId&&t.registerTpaTemplateId(n.templateId,e),e)));t.registerTpasForContext({contextId:n,pageId:i},a)})(s,r,a,d);const l=t=>{const i=o.buildSrc({compId:t,tpaCompData:s[t],pageId:n.pageId,tpaInnerRouteConfig:p});e.update({[t]:{src:i}})},g=()=>{const e=D().pickBy(s,(({widgetId:e,isOOI:n})=>!n&&t[e]));Object.keys(e).forEach(l)};return{pageDidMount:()=>i.addLoadNewSessionCallback((({reason:e})=>{"memberLogin"===e&&g()})),rebuildTpasSrc:g,rebuildTpaSrc:l}}));var Wt=n(17856);const jt=(0,o.Og)([l.oJ,Z.$1,(0,o.KT)(s.Gp,l.UU),kt.Is],((e,t,{tpaInnerRouteConfig:n},i)=>({async onUrlChange(){const a=t.getRelativeUrl(),r=(0,Wt.h)(a.replace(/^\./,""),n.tpaPageUri),o=r?r.join("/"):"";e.dispatch("STATE_CHANGED",(()=>({newState:o})),{pageId:i})}}))),Yt=(0,o.Og)([p.Ji,p.eZ,l.oJ,de.t7,d.RV,kt.Is,a.ir,l.Uj],((e,t,n,i,a,r,{getOpenedPopups:o},{rebuildTpasSrc:s})=>{const p={previousCurrency:null};return{onUrlChange(e){if(!i.getCurrentRouteInfo())return;const t=e.searchParams.get("currency");t!==p.previousCurrency&&(s(),Object.values(o()).forEach((e=>e.refreshPopUp())),p.previousCurrency=t)}}})),Jt=(e,t)=>Qt(t)&&t.templateId||e,Qt=({isResponsive:e,widgetId:t})=>e&&"14517f3f-ffc5-eced-f592-980aaa0bbb5c"===t,Xt=(0,o.Og)([(0,o.KT)(s.YG,g.UU),g.FG],((e,t)=>({buildSrc({compId:n,tpaCompData:i,pageId:a,tpaInnerRouteConfig:r}){const{widgetsClientSpecMapData:o,deviceType:s}=e,p=Jt(n,i),{widgetId:d}=i,{widgetUrl:l,mobileUrl:g}=o[d],c="mobile"===s&&g||l,u=Qt(i)?"masterPage":a,m={};return i.isSection&&(m.tpaInnerRouteConfig=r),t.buildSrc(p,u,i,c,m)},getDefaultProps(t,n,i){const{widgetsClientSpecMapData:a,isMobileView:r}=e,{appDefinitionName:o,appDefinitionId:s,appPage:p,allowScrolling:d}=a[t];return{title:p.name??o,appDefinitionName:o,appDefinitionId:s,isMobileView:r,allowScrolling:d,reportIframeStartedLoading:n,reportWidgetUnresponsive:i}}})));var Zt=n(20636),en=n(789),tn=n(51759);const nn=(0,o.Og)([(0,o.KT)(s.YG,g.UU),(0,o.KT)(s.Gp,l.UU),l._w,l.VY,g.V5,g.$O,d.Ht,d.TQ,(0,o.lq)(l.LE),(0,o.lq)(g.D0)],(({widgetsClientSpecMapData:e},t,n,i,{registerTpaSection:a,unregisterTpaSection:r},o,s,{requestUrl:p},d,l)=>{const g=({appDefinitionId:e="UNKNOWN",widgetId:t="UNKNOWN",compId:n,reason:i})=>{const a="IframeTpaDataIntegrityError",r=new Error(a);r.name=a,s.captureError(r,{tags:{appDefinitionId:e,widgetId:t,feature:"tpa",methodName:"componentWillMount",reason:i},extra:{compId:n}})};return{componentTypes:tn.p,componentWillMount(c){const{widgets:u,tpaInnerRouteConfig:m,pageId:I}=t,h=u[c.id]||u[(0,en.vC)(c.id)];if(!h)return void g({compId:c.id,reason:"MISSING_DATA_ITEM"});const{widgetId:f,isSection:T,appDefinitionId:P,templateId:w}=h;if(!e[f])return void g({appDefinitionId:P,widgetId:f,compId:c.id,reason:"MISSING_FROM_CSM"});l&&l.registerToDataCapsule(w||c.id,P);const y=()=>i.buildSrc({compId:c.id,tpaCompData:h,pageId:I,tpaInnerRouteConfig:m});if(T){const e={appDefinitionId:P,rebuildSrc:()=>{const e=y();n.reportTpaLoadStart(c.id,e),c.updateProps({src:e})}};a(c.id,e)}const U=D().once((()=>{d&&d.reportIframeStartedLoading(c.id)})),C=y(),S=D().once((()=>{const{appDefinitionName:t,isWixTPA:n}=e[f];if(n){const e=new Error("TPA did not send appIsAlive");e.name="IframeTpaUnresponsive",s.captureError(e,{tags:{appDefinitionId:P,widgetId:f,invalidSrc:!C,feature:"tpa",methodName:"componentWillMount"},extra:{appDefinitionName:t,src:C}})}})),O=i.getDefaultProps(f,U,S),L=Jt(c.id,h),E=o?o.getCachedProps(L):{};n.reportTpaLoadStart(c.id,C);const b=p.includes("disableAllPlatformApps");return c.updateProps({...O,src:C,disableAllPlatformApps:b,...E}),()=>{o&&("masterPage"===I?o.cacheProps(c.id):Qt(h)&&o.cacheProps(L,c.getProps())),r(c.id),l&&l.unregister(w||c.id)}}}})),an=(0,o.Og)([(0,o.KT)(s.YG,g.UU),(0,o.KT)(s.Gp,l.UU),de.t7,he.O$,fe.F,Z.xt],(({widgetsClientSpecMapData:e},{widgets:t},n,i,a,r)=>({reportIframeStartedLoading(i){const{widgetId:o,templateId:s}=t[i]||t[(0,en.vC)(i)],p=n.getCurrentRouteInfo(),d=Math.round(performance.now());a.logger.log({appId:e[o].appDefinitionId,widget_id:o,instance_id:s??i,src:42,evid:642,tts:d,pid:p?p.pageId:null,pn:r.getPageNumber()},{endpoint:"ugc-viewer"})}})));var rn=n(73274);const on="$TPA$",sn={[I.rm.PAGE_LINK]:["type","pageId"],[I.rm.EXTERNAL_LINK]:["type","target","url"],[I.rm.ANCHOR_LINK]:["type","anchorName","anchorDataId","pageId"],[I.rm.EMAIL_LINK]:["type","recipient","subject"],[I.rm.PHONE_LINK]:["type","phoneNumber"],[I.rm.WHATSAPP_LINK]:["type","phoneNumber"],[I.rm.DOCUMENT_LINK]:["type","docId","name"],[I.rm.DYNAMIC_PAGE_LINK]:["type","routerId","innerRoute","anchorDataId"],[I.rm.ADDRESS_LINK]:["type","address"]};function pn(e,t,n,i){const a=e.label||"",r=!e.isVisible||!1,o=e.link?function(e){const t=D().pick(e.link,sn[e.link.type]);if(D().isObject(t.pageId)&&(t.pageId=(0,rn.K)(D().get(t,"pageId.id"))),t.anchorDataId){const e=D().get(t,"anchorDataId.id",t.anchorDataId);t.anchorDataId="SCROLL_TO_TOP"===e||"SCROLL_TO_BOTTOM"===e?e:(0,rn.K)(e)}return t}(e):{},s=D().merge(o,{title:a,hidden:r});if(!s.type)return{type:I.rm.MENU_HEADER,hidden:r,title:a,subPages:s.subPages};switch(s.type){default:case I.rm.PAGE_LINK:case I.rm.ANCHOR_LINK:D().merge(s,dn(e,t,n));break;case I.rm.DOCUMENT_LINK:const a=i.getLinkUrlFromDataItem(s),r=i.getLinkProps(a);s.url=r.href}return s}function dn(e,t,n){const i=e.link?.pageId?.pageUriSEO,a={isHomePage:e.link?.pageId?.id===t};return i&&D().assign(a,{url:n+"/"+i}),a}function ln(e,t,n,i,a,r,o){const{externalBaseUrl:s,appsClientSpecMapData:p,metaSiteId:d,userFileDomainUrl:l,routersConfig:g,isMobileView:c,isPremiumDomain:u}=t,m=n.getLinkUtilsRoutingInfo(),h=X({routingInfo:m,metaSiteId:d,userFileDomainUrl:l,routersConfig:g,popupPages:i?.getLightboxPages(),multilingualInfo:r?.getMultilingualInfo(),isMobileView:c,isPremiumDomain:u,experiments:a,getIsUrlCustomized:o?.getIsUrlCustomized});return function({menuItems:e,mainPageId:t,baseUrl:n,linkUtils:i}){return D().map(e,(e=>{const a=pn(e,t,n,i);if(a.type===I.rm.PAGE_LINK||a.type===I.rm.MENU_HEADER){const r=D().map(e.items,(e=>pn(e,t,n,i)));D().size(r)>0&&D().assign(a,{subPages:r})}return a}))}({menuItems:D().filter(e,(({link:e})=>!function(e,t,n){if(!n)return!1;if(n.type===I.rm.PAGE_LINK){const t=()=>{const t=n.pageId?.appDefinitionId;return e[t]};let i=n.pageId?.tpaPageId;const a=t();if(a&&i){D().includes(i,on)&&(i=i.substr(0,i.indexOf(on)));const e=D().find(a.widgets,(e=>e.appPage?.id===i));return e?.appPage.hideFromMenu}}return!1}(p,0,e))),mainPageId:m.mainPageId,baseUrl:s,linkUtils:h})}const gn=(0,o.Og)([(0,o.KT)(s.YG,g.UU),Z.wy,kt.rl,S.n,(0,o.lq)(ee.By),(0,o.lq)(te.tX),(0,o.lq)(w.a)],((e,t,n,i,a,r,o)=>({getSiteMap:async()=>ln(await n.fetchResource("masterPage","siteMap"),e,t,a,i,r,o)}))),cn=(0,o.Og)([(0,o.KT)(s.YG,g.UU),(0,o.KT)(s.Gp,l.UU),p.Ji,d.Ht],(({widgetsClientSpecMapData:e},t,n,i)=>{const a={};return{reportTpaLoadStart:(r,o)=>{const{widgets:s}=t,p=s[r]||s[(0,en.vC)(r)],{widgetId:d,appDefinitionId:l}=p;if(!e[d])return;if(!(e[d].isWixTPA&&o&&n.get(r)?.src!==o))return;const g="tpa_iframe_load",c=Date.now();i.interactionStarted(g,{customParams:{appDefinitionId:l,widgetId:d}}),a[r]={src:o,reportLoadFinished:D().once((()=>i.interactionEnded(g,{customParams:{appDefinitionId:l,widgetId:d,duration:Date.now()-c}})))}},reportTpaLoadEnd:e=>{const t=a[e];t?.src&&n.get(e)?.src===t.src&&t.reportLoadFinished()}}})),un=e=>{e(l.VY).to(Xt),e(l.LE).to(an),e(i.$.PageDidMountHandler,l.Uj).to(qt),e(Zt.ls).to(nn),e(g.eM).to(h),e(i.$.PageDidMountHandler,l.oJ).to(Mt),e(i.$.PageDidLoadHandler).to(zt),e(l.sy).to($t),e(i.$.PageDidMountHandler,a.ir).to(xt),e(l.iQ).to(gn),Et.forEach((t=>{e(a.dQ).to(t)})),e(i.$.PageDidMountHandler).to(f),e(i.$.PageWillUnmountHandler,a.tY).to(Ht),e(i.$.PageWillMountHandler).to(Ft),e(i.$.PageDidMountHandler).to(Vt),e(Z.Qc).to(jt),e(Z.Qc).to(Yt),e(l._w).to(cn),e(r.j).to(xt).whenTargetNamed("tpa"),e(r.j).to(Ht).whenTargetNamed("tpa")}}}]);
//# sourceMappingURL=assets/static.parastorage.com/services/wix-thunderbolt/dist/group_8.259bcc95.chunk.min.js.map